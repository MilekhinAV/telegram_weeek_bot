# ü§ñ Telegram ‚Üí Weeek Bot

–ë–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –≤ —Å–∏—Å—Ç–µ–º–µ **Weeek** –∏–∑ –ª—é–±—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ Telegram.  
–ö–∞–∂–¥–æ–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π API Weeek.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –†–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ **–ª—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ (–ª—é–±–æ–π —É—á–∞—Å—Ç–Ω–∏–∫, –±–æ—Ç –∏–ª–∏ —á–µ–ª–æ–≤–µ–∫).
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–∫—Å—Ç–∞, –º–µ–¥–∏–∞ –∏ –≤–ª–æ–∂–µ–Ω–∏–π:
  - `title` –∑–∞–¥–∞—á–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ —Ç–µ–∫—Å—Ç–∞/–ø–æ–¥–ø–∏—Å–∏ –ª–∏–±–æ –æ–ø–∏—Å–∞–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ.
  - `description` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç + –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (—Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, –¥–∞—Ç–∞).
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ä–æ–∫–∞ –∑–∞–¥–∞—á–∏ –Ω–∞ **—Å–ª–µ–¥—É—é—â–∏–π –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω—ã–π –¥–µ–Ω—å**.
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Weeek API —Å —Ä–µ—Ç—Ä–∞—è–º–∏.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –≤ –∫–æ–Ω—Å–æ–ª—å.
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è (Dockerfile + docker-compose).

---

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Linux-—Å–µ—Ä–≤–µ—Ä —Å Docker –∏ Docker Compose v2.
- –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞.
- API-–∫–ª—é—á Weeek.

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/your-org/weeek-voice-bot.git
cd weeek-voice-bot
````

### 2. –°–æ–∑–¥–∞—Ç—å `.env`

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```bash
cat > .env <<'EOF'
# Telegram
TELEGRAM_BOT_TOKEN=123456:your_token_here

# Weeek API
WEEEK_API_KEY=<-------add your token here ---------->
WEEEK_BASE_URL=https://api.weeek.net/public/v1
WEEEK_TASKS_ENDPOINT=/tm/tasks

# –ü–æ–ª—è –∑–∞–¥–∞—á–∏
WEEEK_USER_ID=<-------add your user ID here ---------->
WEEEK_PROJECT_ID=<-------add your project ID here ---------->
WEEEK_BOARD_COLUMN_ID=<-------add your collumn ID here ---------->

# –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ ID —á–∞—Ç–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é), –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø–µ
ALLOWED_CHAT_IDS=-10093794273940

# –ü—Ä–æ—á–µ–µ
SERVER_TZ=Europe/Moscow
TITLE_MAX_LEN=255
LOG_LEVEL=INFO
EOF
```

> –£–∑–Ω–∞—Ç—å `chat_id` –º–æ–∂–Ω–æ, –¥–æ–±–∞–≤–∏–≤ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∏ –≤—ã–∑–≤–∞–≤:
> `curl "https://api.telegram.org/bot<TELEGRAM_BOT_TOKEN>/getUpdates"`

### 3. –ó–∞–ø—É—Å–∫

```bash
docker compose build
docker compose up -d
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞

–õ–æ–≥–∏:

```bash
docker compose logs -f
```

–ï—Å–ª–∏ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø—Ä–∏ –ª—é–±–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –≤ –≥—Ä—É–ø–ø–µ –æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç:

* `‚úÖ –ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –≤ Weeek`
* –∏–ª–∏ `‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É...` –ø—Ä–∏ –æ—à–∏–±–∫–µ.

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Linux (—á–µ–∫-–ª–∏—Å—Ç)

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∏ Compose:

   ```bash
   sudo apt-get update
   sudo apt-get install -y docker.io docker-compose-plugin
   ```

2. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   ```bash
   git clone https://github.com/your-org/weeek-voice-bot.git
   cd weeek-voice-bot
   ```

3. –°–æ–∑–¥–∞—Ç—å `.env` —Å —Ç–æ–∫–µ–Ω–∞–º–∏.

4. –ó–∞–ø—É—Å—Ç–∏—Ç—å:

   ```bash
   docker compose up -d
   ```

5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

   ```bash
   docker compose ps
   docker compose logs -f
   ```

6. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç—å:

   ```bash
   git pull
   docker compose build
   docker compose up -d
   ```

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

* **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:**

  ```bash
  docker compose down
  ```

* **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:**

  ```bash
  docker compose restart
  ```

* **–õ–æ–≥–∏:**

  ```bash
  docker compose logs -f
  ```

---

## ‚ùì FAQ –∏ —Ç–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏

### 1. –û—à–∏–±–∫–∞:

```
TelegramConflictError: Conflict: terminated by other getUpdates request
```

**–ü—Ä–∏—á–∏–Ω–∞:** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞, –ª–∏–±–æ —É –±–æ—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω webhook.
**–†–µ—à–µ–Ω–∏–µ:**

* –ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –±–æ—Ç–æ–º:

  ```bash
  docker compose down --remove-orphans
  docker ps -q --filter "ancestor=weeek-voice-bot:latest" | xargs -r docker stop
  ```
* –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ—Ç –ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Python-–ø—Ä–æ—Ü–µ—Å—Å–∞:

  ```bash
  pgrep -af "python.*main.py" | xargs -r kill
  ```
* –°–±—Ä–æ—Å–∏—Ç—å webhook:

  ```bash
  curl "https://api.telegram.org/bot<TELEGRAM_BOT_TOKEN>/deleteWebhook?drop_pending_updates=true"
  ```

---

### 2. –û—à–∏–±–∫–∞:

```
Error response from daemon: pull access denied for weeek-voice-bot
```

**–ü—Ä–∏—á–∏–Ω–∞:** `docker compose` –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∫–∞—á–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞, –Ω–æ –æ–±—Ä–∞–∑ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω.
**–†–µ—à–µ–Ω–∏–µ:**

* –°–æ–±—Ä–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

  ```bash
  docker compose build
  docker compose up -d
  ```

---

### 3. –û—à–∏–±–∫–∞:

```
TELEGRAM_BOT_TOKEN is not set
```

**–ü—Ä–∏—á–∏–Ω–∞:** –Ω–µ –∑–∞–¥–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`.
**–†–µ—à–µ–Ω–∏–µ:** –æ—Ç–∫—Ä—ã—Ç—å `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `TELEGRAM_BOT_TOKEN`.

---

### 4. –û—à–∏–±–∫–∞:

```
‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
```

**–ü—Ä–∏—á–∏–Ω–∞:** –æ—à–∏–±–∫–∞ API Weeek (–Ω–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á, ID –ø—Ä–æ–µ–∫—Ç–∞/–¥–æ—Å–∫–∏ –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å).
**–†–µ—à–µ–Ω–∏–µ:** –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

* –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `WEEEK_API_KEY`;
* `WEEEK_USER_ID`, `WEEEK_PROJECT_ID`, `WEEEK_BOARD_COLUMN_ID`;
* —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞.

---

### 5. –ë–æ—Ç –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –≤ –≥—Ä—É–ø–ø–µ

* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **privacy mode** –æ—Ç–∫–ª—é—á—ë–Ω —É –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather (`/setprivacy ‚Üí Disable`).
* –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `ALLOWED_CHAT_IDS` –≤ `.env` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å ID –≤–∞—à–µ–π –≥—Ä—É–ø–ø—ã.
* –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:

  ```bash
  docker compose logs -f
  ```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ requirements.txt
```

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

MIT (–∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é)
